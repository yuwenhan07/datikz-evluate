{
  "prompt": "Illustration of the proof sketch of Theorem~\\ref{th:main}. On the left, the $h$-backward substructure from~$p$ that is detailed in Section~\\ref{sec:backward}. It has size $\\Theta(\\sqrt{n})$ and contains $\\Theta(\\sqrt{n})$ extremal leaves (i.e. leaves in its last level $h$) to be valid. In the center, the forward tree from $r$, described in Section~\\ref{sec:forward}; it is a breadth-first traversal that is valid if it hits an extremal leaf of the backward substructure before $\\sqrt{n}$ states are examined. On the right the $b$-threads introduced in Section~\\ref{sec:b-cycles}, obtained by reading $b$'s from the $p_i$'s; they are valid if they are made of previously unseen states and are pairwise disjoint until they cycle back on themselves, forming a $b$-cycle of length in $[\\![\\sqrt{n},2\\sqrt{n}\\,]\\!]$.",
  "response": "Certainly! Below is a TikZ LaTeX code that illustrates the proof sketch of Theorem \\ref{th:main} as described:\n\n```latex\n\\documentclass[tikz,border=10pt]{standalone}\n\\usetikzlibrary{shapes.geometric, arrows.meta}\n\n\\tikzset{\n    node distance=2cm,\n    start chain/.style={start chain=going below},\n    box/.style={draw, rectangle, minimum width=3cm, minimum height=1cm, align=center},\n    line/.style={->, thick}\n}\n\n\\begin{document}\n\\begin{tikzpicture}[node distance=2cm]\n\n% Left: h-backward substructure\n\\node[box] (left_box) {h-backward substructure};\n\\node[box, below=of left_box] (extremal_leaves) {$\\Theta(\\sqrt{n})$ extremal leaves};\n\n% Center: Forward tree\n\\node[box, left=of left_box, xshift=-5cm] (center_box) {Forward Tree};\n\\node[box, below=of center_box] (states_examined) {$< \\sqrt{n}$ states examined};\n\\node[box, below=of states_examined] (extremal_leaf_hit) {Hit extremal leaf};\n\n% Right: b-threads\n\\node[box, right=of left_box, xshift=5cm] (right_box) {$b$-threads};\n\\node[box, below=of right_box] (disjoint_threads) {Pairwise disjoint};\n\\node[box, below=of disjoint_threads] (b_cycle) {$b$-cycle $[\\![\\sqrt{n}, 2\\sqrt{n}\\,]\\!]$};\n\n% Connections\n\\draw[line] (left_box.south) -- (extremal_leaves.north);\n\\draw[line] (center_box.south) -- (states_examined.north);\n\\draw[line] (states_examined.south) -- (extremal_leaf_hit.north);\n\\draw[line] (right_box.south) -- (disjoint_threads.north);\n\\draw[line] (disjoint_threads.south) -- (b_cycle.north);\n\n\\end{tikzpicture}\n\\end{document}\n```\n\nThis code creates a simple diagram with three boxes representing the left (h-backward substructure), center (forward tree), and right ($b$-threads) parts of",
  "latex_code": "\\documentclass[tikz,border=10pt]{standalone}\n\\usetikzlibrary{shapes.geometric, arrows.meta}\n\n\\tikzset{\n    node distance=2cm,\n    start chain/.style={start chain=going below},\n    box/.style={draw, rectangle, minimum width=3cm, minimum height=1cm, align=center},\n    line/.style={->, thick}\n}\n\n\\begin{document}\n\\begin{tikzpicture}[node distance=2cm]\n\n% Left: h-backward substructure\n\\node[box] (left_box) {h-backward substructure};\n\\node[box, below=of left_box] (extremal_leaves) {$\\Theta(\\sqrt{n})$ extremal leaves};\n\n% Center: Forward tree\n\\node[box, left=of left_box, xshift=-5cm] (center_box) {Forward Tree};\n\\node[box, below=of center_box] (states_examined) {$< \\sqrt{n}$ states examined};\n\\node[box, below=of states_examined] (extremal_leaf_hit) {Hit extremal leaf};\n\n% Right: b-threads\n\\node[box, right=of left_box, xshift=5cm] (right_box) {$b$-threads};\n\\node[box, below=of right_box] (disjoint_threads) {Pairwise disjoint};\n\\node[box, below=of disjoint_threads] (b_cycle) {$b$-cycle $[\\![\\sqrt{n}, 2\\sqrt{n}\\,]\\!]$};\n\n% Connections\n\\draw[line] (left_box.south) -- (extremal_leaves.north);\n\\draw[line] (center_box.south) -- (states_examined.north);\n\\draw[line] (states_examined.south) -- (extremal_leaf_hit.north);\n\\draw[line] (right_box.south) -- (disjoint_threads.north);\n\\draw[line] (disjoint_threads.south) -- (b_cycle.north);\n\n\\end{tikzpicture}\n\\end{document}",
  "ground_truth": "\\documentclass{article}\n\\usepackage{hyperref,amsmath,amssymb}\n\\usepackage{tikz,comment}\n\\usetikzlibrary{automata, arrows.meta, positioning,decorations.pathmorphing}\n\n\\begin{document}\n\n\\begin{tikzpicture}\n\t\\node[draw, circle] (s) at (0,0) {$p$};\n\t\n\t% s backward tree\n\t\\node[draw] (b1) at (0,-1) {$L_1$};\n\t\\node[draw] (b2) at (0,-2) {$\\quad L_2\\quad$};\n\t\\node (dots1) at (0,-3) {$\\vdots$};\n\t\\node[draw,blue] (btau) at (0,-4) {$\\ |L_h|\\in\\Theta(\\sqrt{n})\\ $};\n\n\t\\draw[->] (.2,-0.7) -- (.1,-0.3);\n\t\\draw[->] (-.2,-0.7) -- (-.1,-0.3);\n\t\n\t\\draw[->] (0,-1.7) -- (0,-1.3);\n\t\\draw[->] (-.5,-1.7) -- (-.2,-1.3);\n\t\\draw[->] (.5,-1.7) -- (.3,-1.3);\n\n\t\\draw[->] (-.25,-2.7) -- (-.15,-2.3);\n\t\\draw[->] (.25,-2.7) -- (.15,-2.3);\n\t\\draw[->] (-.6,-2.7) -- (-.4,-2.3);\n\t\\draw[->] (.6,-2.7) -- (.4,-2.3);\n\t\n\t\\draw[->] (0,-3.7) -- (0,-3.3);\n\t\\draw[->] (-.4,-3.7) -- (-.2,-3.3);\n\t\\draw[->] (.4,-3.7) -- (.3,-3.3);\n\t\\draw[->] (-.9,-3.7) -- (-.7,-3.3);\n\t\\draw[->] (.9,-3.7) -- (.7,-3.3);\n\n    \t\\draw[thin,<->,purple] (-1.6,-4.23) -- node[rotate=90,fill=white]{\\footnotesize $h$-backward substructure} (-1.6,0.23);\n\n\t% r forward tree\n\t\\node[draw,circle] (r) at (3,-2) {$r$};\n\t\\draw[->] (s) -- node[above]{$a$} (r);\n\t\\node(ra) at (2.6, -2.7) {$\\bullet$}; \\draw[->,shorten >=-3pt] (r) -- node[right]{\\tiny $a$} (ra);\n\t\\node (rb) at (3.4, -2.7) {$\\bullet$}; \\draw[->,shorten >=-3pt] (r) -- node[right]{\\tiny $b$} (rb);\n\t\\node (raa) at (2.4, -3.4) {$\\bullet$}; \\draw[->,shorten >=-3pt] (ra) -- node[left]{\\tiny $a$} (raa);\n\t\\node (rab) at (2.8, -3.4) {$\\bullet$}; \\draw[->,shorten >=-3pt] (ra) -- node[right]{\\tiny $b$} (rab);\n\t\\node (rba) at (3.2, -3.4) {$\\bullet$}; \\draw[->,shorten >=-3pt] (rb) -- node[left]{\\tiny $a$} (rba);\n\t\\node (rbb) at (3.6, -3.4) {$\\bullet$}; \\draw[->,shorten >=-3pt] (rb) -- node[right]{\\tiny $b$} (rbb);\n\t\\node (raaa) at (2.2, -4.1) {$\\bullet$}; \\draw[->,shorten >=-3pt] (raa) -- node[left]{\\tiny $a$} (raaa);\n\t\\draw[blue,->]  (raa) edge[bend left=120] node[below]{$b$} (btau);\n\n\t\\draw[thin,<->,purple] (4,-4.23) -- node[rotate=90,fill=white]{\\footnotesize forward tree} (4,-1.77);\n\n\t% added transition\n\t\\node[draw,circle] (t) at (5,0) {$q$};\n\t\\draw[->,red] (s) -- node[above]{$a$} (t);\n\n\t\\node[draw,circle] (s1) at (7,0) {\\footnotesize $p_1$};\n\t\\draw[->,thick,green!50!black,decorate,decoration={snake,amplitude=.4mm,segment length=2mm,post length=1mm}] (t) -- node[above]{$w$} (s1);\n\n\t\\node[draw,circle] (s2) at (9,0) {\\footnotesize $p_2$};\n\t\\draw[->,thick, green!50!black,decorate,decoration={snake,amplitude=.4mm,segment length=2mm,post length=1mm}] (s1) -- node[above]{${\\color{black}a}w$} (s2);\n\n\t\\draw[->,green!50!black, thick,decorate,decoration={snake,amplitude=.4mm,segment length=2mm,post length=1mm}] (2.8,-2.2) .. controls (1.3,-4.2) and  (.4,-.6) .. node[right]{$w$} (.3,-.4);\n\t\n\t\\node (p01) at (5,-1) {$\\bullet$}; \\draw[->] (s) -- node[above]{\\footnotesize $b$} (p01);\n\t\\node (p02) at (5,-1.7) {$\\bullet$}; \\draw[->] (p01) -- node[left]{\\footnotesize $b$} (p02);\n\t\\node (p03) at (5,-2.4) {$\\bullet$}; \\draw[->] (p02) -- node[left]{\\footnotesize $b$} (p03);\n\t\\node (p04) at (5,-3.1) {$\\bullet$}; \\draw[->] (p03) -- node[left]{\\footnotesize $b$} (p04);\n\t\\node (p0n) at (5,-4) {$\\bullet$}; \\draw[->,dotted] (p04) -- (p0n);\n\t\\draw[->] (p0n) edge[bend right=25] node[right]{\\footnotesize $b$} (p01);\n\n\t\\node (p11) at (7,-1) {$\\bullet$}; \\draw[->] (s1) -- node[left]{\\footnotesize $b$} (p11);\n\t\\node (p12) at (7,-1.7) {$\\bullet$}; \\draw[->] (p11) -- node[left]{\\footnotesize $b$} (p12);\n\t\\node (p13) at (7,-2.4) {$\\bullet$}; \\draw[->] (p12) -- node[left]{\\footnotesize $b$} (p13);\n\t\\node (p14) at (7,-3.1) {$\\bullet$}; \\draw[->] (p13) -- node[left]{\\footnotesize $b$} (p14);\n\t\\node (p1n) at (7,-4) {$\\bullet$}; \\draw[->,dotted] (p14) -- (p1n);\n\t\\draw[->] (p1n) edge[bend right=25] node[right]{\\footnotesize $b$} (p13);\n\n\t\\node (p21) at (9,-1) {$\\bullet$}; \\draw[->] (s2) -- node[left]{\\footnotesize $b$} (p21);\n\t\\node (p22) at (9,-1.7) {$\\bullet$}; \\draw[->] (p21) -- node[left]{\\footnotesize $b$} (p22);\n\t\\node (p23) at (9,-2.4) {$\\bullet$}; \\draw[->] (p22) -- node[left]{\\footnotesize $b$} (p23);\n\t\\node (p24) at (9,-3.1) {$\\bullet$}; \\draw[->] (p23) -- node[left]{\\footnotesize $b$} (p24);\n\t\\node (p2n) at (9,-4) {$\\bullet$}; \\draw[->,dotted] (p24) -- (p2n);\n\t\\draw[->] (p2n) edge[bend right=25] node[right]{\\footnotesize $b$} (p22);\n\n\t\\draw[thin,<->,purple] (4.8,-4.4) -- node[fill=white]{\\footnotesize three $b$-threads} (9.4,-4.4);\n\n    \\node[purple] (text) at (.7,.8) {\\footnotesize the added random transition};\n    \\draw[purple, thin] (text.east) edge[->,bend left] (4,.1);\n\n\t\\end{tikzpicture}\n\n\\end{document}"
}