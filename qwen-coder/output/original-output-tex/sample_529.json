{
  "prompt": "For the individual adapter predictions, we use a Transformer based model with adapter layers inserted after the feed forward layer of the Transformer as proposed by \\citet{pfeiffer-etal-2021-adapterfusion}.",
  "response": "To create a TikZ diagram that visually represents a Transformer model with adapter layers inserted after the feed-forward layer, you can use the following LaTeX code:\n\n```latex\n\\documentclass[tikz,border=3mm]{standalone}\n\\usetikzlibrary{shapes.geometric, arrows.meta}\n\n\\tikzset{\n    transformer/.style={rectangle, draw, minimum width=4cm, minimum height=2cm},\n    adapter/.style={rectangle, draw, minimum width=2cm, minimum height=1cm, fill=blue!20},\n    arrow/.style={->, >=stealth', thick}\n}\n\n\\begin{document}\n\\begin{tikzpicture}[node distance=1cm]\n    % Input Layer\n    \\node (input) [transformer] {Input};\n    \n    % Encoder Layers\n    \\foreach \\i in {1,...,3} {\n        \\node[transformer, below=of input.south west, xshift=\\i*1.5cm] (encoder-\\i) {Encoder \\i};\n        \\draw[arrow] (input.south) -- (encoder-\\i.north);\n        \n        % Feed Forward Layer\n        \\node[below=of encoder-\\i.south west, xshift=\\i*1.5cm] (ff-\\i) {Feed Forward};\n        \\draw[arrow] (encoder-\\i.south) -- (ff-\\i.north);\n        \n        % Adapter Layer\n        \\node[adapter, below=of ff-\\i.south west, xshift=\\i*1.5cm] (adapter-\\i) {Adapter};\n        \\draw[arrow] (ff-\\i.south) -- (adapter-\\i.north);\n        \n        % Output Layer\n        \\node[transformer, below=of adapter-\\i.south west, xshift=\\i*1.5cm] (output-\\i) {Output};\n        \\draw[arrow] (adapter-\\i.south) -- (output-\\i.north);\n    }\n\\end{tikzpicture}\n\\end{document}\n```\n\nThis code creates a simple visual representation of a Transformer model with three encoder layers, each containing an input layer, feed-forward layer, adapter layer, and output layer. The `transformer` style is used for the main layers, the `adapter` style for the adapter layers, and the `arrow` style for drawing arrows between the layers.\n\nYou can compile",
  "latex_code": "\\documentclass[tikz,border=3mm]{standalone}\n\\usetikzlibrary{shapes.geometric, arrows.meta}\n\n\\tikzset{\n    transformer/.style={rectangle, draw, minimum width=4cm, minimum height=2cm},\n    adapter/.style={rectangle, draw, minimum width=2cm, minimum height=1cm, fill=blue!20},\n    arrow/.style={->, >=stealth', thick}\n}\n\n\\begin{document}\n\\begin{tikzpicture}[node distance=1cm]\n    % Input Layer\n    \\node (input) [transformer] {Input};\n    \n    % Encoder Layers\n    \\foreach \\i in {1,...,3} {\n        \\node[transformer, below=of input.south west, xshift=\\i*1.5cm] (encoder-\\i) {Encoder \\i};\n        \\draw[arrow] (input.south) -- (encoder-\\i.north);\n        \n        % Feed Forward Layer\n        \\node[below=of encoder-\\i.south west, xshift=\\i*1.5cm] (ff-\\i) {Feed Forward};\n        \\draw[arrow] (encoder-\\i.south) -- (ff-\\i.north);\n        \n        % Adapter Layer\n        \\node[adapter, below=of ff-\\i.south west, xshift=\\i*1.5cm] (adapter-\\i) {Adapter};\n        \\draw[arrow] (ff-\\i.south) -- (adapter-\\i.north);\n        \n        % Output Layer\n        \\node[transformer, below=of adapter-\\i.south west, xshift=\\i*1.5cm] (output-\\i) {Output};\n        \\draw[arrow] (adapter-\\i.south) -- (output-\\i.north);\n    }\n\\end{tikzpicture}\n\\end{document}",
  "ground_truth": "\\documentclass[10pt, a4paper]{article}\n\\usepackage{amsmath}\n\\usepackage{tikz}\n\\usetikzlibrary{shadows}\n\\usetikzlibrary{arrows}\n\\usepackage{colortbl}\n\n\\begin{document}\n\n\\begin{tikzpicture}[block/.style={rectangle, draw, line width=0.3mm, rounded corners, font=\\ttfamily\\scriptsize}]\n    \\node[block, minimum width=4.0cm, minimum height=9.3cm, line width=0.6mm, rounded corners=5mm, fill=cyan!10, drop shadow] (main) at (0,-0.6) {};\n    \\node[block, dashed, minimum width=2.7cm, minimum height=4.2cm, line width=0.2mm, fill=red!10] (main) at (0,1.0) {};\n\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=yellow!10] (add3) at (0, 3.6) {Add \\& Norm};\n\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (addadap2) at (0,2.7) {Add};\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (normadap2) at (0,2.2) {Norm};\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (addadap1) at (0,1.7) {Add};\n\n    \\node[block, minimum width=2cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=blue!10] (ff3) at (0,1.0) {Feed \\\\ Forward Up};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=blue!10] (ff2) at (0,0.2) {Feed \\\\ Forward Down};\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (normadap1) at (0,-0.5) {Norm};\n\n\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=yellow!10] (add2) at (0,-1.6) {Add \\& Norm};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=blue!10] (ff1) at (0,-2.5) {Feed \\\\ Forward};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=yellow!10] (add1) at (0,-3.4) {Add \\& Norm};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=brown!10] (att1) at (0,-4.2) {Multi-Head \\\\ Attention};\n\n    \\draw[->, line width=0.3mm] (-1.1,-2.0) |- (addadap2);\n    \\draw[->, line width=0.3mm] (-1.1,-2.0) |- (addadap1);\n\n    \\draw[line width=0.3mm] (0,-2.0) |- (-1.1,-2.0);\n    \\draw[line width=0.3mm] (0,-1.25) |- (-1.1,-1.25);\n\n\n    \\draw[->, line width=0.3mm] (-1.5,-3.0) |- (add3);\n\n    \\draw[->, line width=0.3mm] (-1.5,-3.0) |- (add2);\n    \\draw[line width=0.3mm] (0,-3.0) |- (-1.5,-3.0);\n\n    \\draw[->, line width=0.3mm] (-1.5,-5.0) |- (add1);\n    \\draw[line width=0.3mm] (0,-5.0) |- (-1.5,-5.0);\n\n    \\draw[->, line width=0.3mm] (-0.5,-4.8) -| (0.5, -4.55);\n    \\draw[->, line width=0.3mm] (-0.5,-4.8) -| (-0.5, -4.55);\n    \\draw[->, line width=0.3mm] (0,-5.5) -- (-0,-4.55);\n\n\n    \\path[every node/.style={font=\\sffamily\\small}]\n        (att1) edge[line width=0.3mm] node [right] {} (add1)\n        (add1) edge[line width=0.3mm] node [right] {} (ff1)\n        (ff1) edge[line width=0.3mm] node [right] {} (add2)\n        (add2) edge[line width=0.3mm] node [right] {} (normadap1)\n        (normadap1) edge[line width=0.3mm] node [right] {} (ff2)\n        (ff2) edge[line width=0.3mm] node [right] {} (ff3)\n        (ff3) edge[line width=0.3mm] node [right] {} (addadap1)\n        (addadap1) edge[line width=0.3mm] node [right] {} (normadap2)\n        (normadap2) edge[line width=0.3mm] node [right] {} (addadap2)\n        (addadap2) edge[line width=0.3mm] node [right] {} (add3);\n\n\n    \\node[font=\\scriptsize\\ttfamily\\bfseries, text centered, text width=1cm] at (0.7,-0.9) {Adapter};\n\n\n\\end{tikzpicture}\n\n\\end{document}"
}