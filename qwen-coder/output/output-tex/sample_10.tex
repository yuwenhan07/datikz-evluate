\documentclass{standalone}
\usepackage{tikz}

\begin{document}
\begin{tikzpicture}[scale=0.8]
    \def\numQubits{4} % Number of qubits
    \def\layerHeight{1.5cm} % Height of each layer
    \def\gateWidth{0.7cm} % Width of each gate

    % Draw qubits
    \foreach \q in {1,...,\numQubits}{
        \node[draw, circle, minimum size=\gateWidth] at (\q*1.2cm, 0) {};
    }

    % Draw R_y gates
    \foreach \q in {1,...,\numQubits}{
        \node[draw, rectangle, minimum width=\gateWidth, minimum height=\layerHeight/2, align=center] at (\q*1.2cm, \layerHeight/4) {$R_y(\theta_{\q})$};
    }

    % Draw entanglers
    \foreach \q in {1,...,\numQubits-1}{
        \draw[dashed, ->] (\q*1.2cm+\gateWidth/2, 0) -- (\q*1.2cm+\gateWidth/2, -\layerHeight);
    }

    % Draw dashed box for repeating layers
    \draw[dashed, thick] (\numQubits*1.2cm+0.2cm, \layerHeight) rectangle (\numQubits*1.2cm+2cm, -\layerHeight);

    % Label the dashed box
    \node[above right] at (\numQubits*1.2cm+1.6cm, \layerHeight) {$D$};

\end{tikzpicture}
\end{document}