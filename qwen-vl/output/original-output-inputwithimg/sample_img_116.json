{
  "prompt": "A visual representation of the training scheme for LoRA. The update of $W$ is given by $W_0 + BA$ where $B$ and $A$ are of a particular low-rank form.",
  "response": "To create the LaTeX code for the image you provided, you can use the `tikz` package along with the `matrix` and `shapes.geometric` libraries to draw the diagram. Below is the LaTeX code that generates the image:\n\n```latex\n\\documentclass{article}\n\\usepackage{amsmath}\n\\usepackage{tikz}\n\\usetikzlibrary{matrix, shapes.geometric}\n\n\\begin{document}\n\n\\begin{figure}[h]\n    \\centering\n    \\begin{tikzpicture}[scale=1.5]\n        % Draw the rectangle for the pretrained weights\n        \\draw[fill=blue!20] (0,0) rectangle (2,2) node[midway, fill=white, text width=2cm, align=center] {Pretrained\\\\Weights\\\\$W_0 \\in \\mathbb{R}^{d \\times k}$};\n        \n        % Draw the parallelogram for B\n        \\draw[fill=orange!20] (3,0) -- (4,1) -- (5,0) -- (4,-1) -- cycle node[midway, fill=white, text width=2cm, align=center] {$B \\in \\mathbb{R}^{d \\times r}$};\n        \n        % Draw the parallelogram for A\n        \\draw[fill=orange!20] (3,2) -- (4,3) -- (5,2) -- (4,1) -- cycle node[midway, fill=white, text width=2cm, align=center] {$A \\in \\mathbb{R}^{r \\times k}$};\n        \n        % Draw the summation symbol\n        \\draw (3,2) -- (3,3) -- (4,3) -- (4,2) -- cycle;\n        \\node at (3.5, 2.5) {$+$};\n        \n        % Draw the arrows and labels\n        \\draw[->] (-0.5, 1) -- (-0.5, -0.5) node[left] {$W \\rightarrow$};\n        \\draw[->] (2.5, 2) -- (2.5, 2.5) node[above] {$k$};\n        \\draw[->] (5, 2) -- (5, 2.5) node[above] {$k$};\n        \\draw[->] (3, -0.5) -- (3, 0) node[below] {$d$};\n        \\draw[->] (4, 1) -- (4, 0) node[below] {$r$};\n        \\draw[->] (4, 3) -- (4, 2) node[below] {$r$};\n        \n        % Draw the key box\n        \\draw[fill=blue!20] (6,0) rectangle (7,1) node[midway, fill=white, text width=1cm, align=center] {Frozen};\n        \\draw[fill=black!20] (6,1.5) rectangle (7,2.5) node[midway, fill=white, text width=1cm, align=center] {Trainable};\n        \\node at (6.5, 2) {Key};\n    \\end{tikzpicture}\n\\end{figure}\n\n\\textbf{Caption:} A visual representation of the training scheme for LoRA. The update of $W$ is given by $W_0 + BA$ where $B$ and $A$ are of a particular low-rank form.\n\n\\end{document}\n```\n\nThis code will produce a diagram similar to the one you provided, with the necessary labels and arrows to indicate the flow of the update process. The `tikz` package is used to draw the geometric shapes and the arrows, while the `matrix` library is not directly used here but could be useful for more complex layouts if needed.",
  "latex_code": "\\documentclass{article}\n\\usepackage{amsmath}\n\\usepackage{tikz}\n\\usetikzlibrary{matrix, shapes.geometric}\n\n\\begin{document}\n\n\\begin{figure}[h]\n    \\centering\n    \\begin{tikzpicture}[scale=1.5]\n        % Draw the rectangle for the pretrained weights\n        \\draw[fill=blue!20] (0,0) rectangle (2,2) node[midway, fill=white, text width=2cm, align=center] {Pretrained\\\\Weights\\\\$W_0 \\in \\mathbb{R}^{d \\times k}$};\n        \n        % Draw the parallelogram for B\n        \\draw[fill=orange!20] (3,0) -- (4,1) -- (5,0) -- (4,-1) -- cycle node[midway, fill=white, text width=2cm, align=center] {$B \\in \\mathbb{R}^{d \\times r}$};\n        \n        % Draw the parallelogram for A\n        \\draw[fill=orange!20] (3,2) -- (4,3) -- (5,2) -- (4,1) -- cycle node[midway, fill=white, text width=2cm, align=center] {$A \\in \\mathbb{R}^{r \\times k}$};\n        \n        % Draw the summation symbol\n        \\draw (3,2) -- (3,3) -- (4,3) -- (4,2) -- cycle;\n        \\node at (3.5, 2.5) {$+$};\n        \n        % Draw the arrows and labels\n        \\draw[->] (-0.5, 1) -- (-0.5, -0.5) node[left] {$W \\rightarrow$};\n        \\draw[->] (2.5, 2) -- (2.5, 2.5) node[above] {$k$};\n        \\draw[->] (5, 2) -- (5, 2.5) node[above] {$k$};\n        \\draw[->] (3, -0.5) -- (3, 0) node[below] {$d$};\n        \\draw[->] (4, 1) -- (4, 0) node[below] {$r$};\n        \\draw[->] (4, 3) -- (4, 2) node[below] {$r$};\n        \n        % Draw the key box\n        \\draw[fill=blue!20] (6,0) rectangle (7,1) node[midway, fill=white, text width=1cm, align=center] {Frozen};\n        \\draw[fill=black!20] (6,1.5) rectangle (7,2.5) node[midway, fill=white, text width=1cm, align=center] {Trainable};\n        \\node at (6.5, 2) {Key};\n    \\end{tikzpicture}\n\\end{figure}\n\n\\textbf{Caption:} A visual representation of the training scheme for LoRA. The update of $W$ is given by $W_0 + BA$ where $B$ and $A$ are of a particular low-rank form.\n\n\\end{document}",
  "ground_truth": "\\documentclass{article}\n\\usepackage{amssymb}\n\\usepackage{tikz}\n\n\\begin{document}\n\n\\begin{tikzpicture}[]\n\\node[fill=blue!10 ,minimum height = 12em, draw=black] at (0,0) {\\begin{tabular}{c}Pretrained\\\\ Weights\\\\ \\\\ $W_0 \\in \\mathbb{R}^{d\\times k}$ \\end{tabular}};\n\n\\draw[fill=orange!10 ,minimum height = 10em] (2,-2) -- (5,-2) -- (4,-.5) -- (3,-.5) -- (2,-2);\n\\draw[fill=orange!10 ,minimum height = 10em] (2,2) -- (5,2) -- (4,.5) -- (3,.5) -- (2,2);\n\\node at (3.5,-1.5) {$B\\in \\mathbb{R}^{d\\times r}$};\n\\node at (3.5,1.5) {$A\\in \\mathbb{R}^{r\\times k}$};\n\\node at (3.5,0) {$\\otimes$};\n\\node at (3.5,.3) {$r$};\n\\node at (3.5,-.3) {$r$};\n\\node at (3.5,-2.3) {$d$};\n\\node at (0,-2.3) {$d$};\n\\node at (0,2.3) {$k$};\n\\node at (3.5,2.3) {$k$};\n\\draw (2,3) circle (2mm);\n\\draw (2,3-.2) -- (2,3+.2);\n\\draw[rounded corners=2pt, thick] (0,2.5) |- (2,3);\n\\draw[rounded corners=2pt, thick] (3.5,2.5) |- (2,3);\n\\node[fill=orange!10, draw=black, thick, minimum width=5em] at (8,0.5) {Trainable};\n\\node[fill=blue!10, draw=black, thick, minimum width=5em] at (8,-0.5) {Frozen};\n\\node at (8,1) {Key};\n\\node at (-2,0) {$W \\to $};\n\\end{tikzpicture}\n\n\\end{document}"
}