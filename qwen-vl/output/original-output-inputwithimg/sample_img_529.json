{
  "prompt": "For the individual adapter predictions, we use a Transformer based model with adapter layers inserted after the feed forward layer of the Transformer as proposed by \\citet{pfeiffer-etal-2021-adapterfusion}.",
  "response": "To generate LaTeX code for the image you provided, you can use the `tikz` package along with the `tikz-cd` library to create the diagram. Below is an example of how you can achieve this:\n\n```latex\n\\documentclass{article}\n\\usepackage{tikz}\n\\usetikzlibrary{positioning, shapes.geometric, arrows.meta}\n\n\\begin{document}\n\n\\begin{tikzpicture}[node distance=5mm,\n    block/.style={draw, rounded corners, minimum height=8mm},\n    arrow/.style={-{Latex[length=3mm]}},\n    dashed arrow/.style={-{Latex[length=3mm]}, dashed}\n]\n\n% Define nodes\n\\node[block] (add_norm) {Add \\& Norm};\n\\node[block, below=of add_norm] (add) {Add};\n\\node[block, below=of add] (norm) {Norm};\n\\node[block, below=of norm] (add2) {Add};\n\\node[block, below=of add2, fill=blue!20] (ff_up) {Feed Forward Up};\n\\node[block, below=of ff_up, fill=blue!20] (ff_down) {Feed Forward Down};\n\\node[block, below=of ff_down] (norm2) {Norm};\n\\node[block, below=of norm2] (adapter) {Adapter};\n\\node[block, below=of adapter] (add_norm2) {Add \\& Norm};\n\\node[block, below=of add_norm2] (ff) {Feed Forward};\n\\node[block, below=of ff] (add_norm3) {Add \\& Norm};\n\\node[block, below=of add_norm3] (attn) {Multi-Head Attention};\n\n% Draw arrows\n\\draw[arrow] (add_norm) -- (add);\n\\draw[arrow] (add) -- (norm);\n\\draw[arrow] (norm) -- (add2);\n\\draw[arrow] (add2) -- (ff_up);\n\\draw[arrow] (ff_up) -- (ff_down);\n\\draw[arrow] (ff_down) -- (norm2);\n\\draw[arrow] (norm2) -- (adapter);\n\\draw[dashed arrow] (adapter) -- ++(0,-10mm) -| (add_norm2);\n\\draw[arrow] (add_norm2) -- (ff);\n\\draw[arrow] (ff) -- (add_norm3);\n\\draw[arrow] (add_norm3) -- (attn);\n\n% Draw dashed box around the adapter section\n\\draw[dashed, thick] ([shift={(0,1)}]ff_down.north west) rectangle ([shift={(0,-1)}]adapter.south east);\n\n% Draw the outer rectangle\n\\draw[thick, rounded corners] ([shift={(-1,-1)}]add_norm.west) rectangle ([shift={(1,1)}]attn.east);\n\n\\end{tikzpicture}\n\nFor the individual adapter predictions, we use a Transformer-based model with adapter layers inserted after the feed-forward layer of the Transformer as proposed by \\citet{pfeiffer-etal-2021-adapterfusion}.\n\n\\end{document}\n```\n\nThis code will produce a diagram similar to the one you provided. You can adjust the positioning and styles as needed to better fit your document's layout.",
  "latex_code": "\\documentclass{article}\n\\usepackage{tikz}\n\\usetikzlibrary{positioning, shapes.geometric, arrows.meta}\n\n\\begin{document}\n\n\\begin{tikzpicture}[node distance=5mm,\n    block/.style={draw, rounded corners, minimum height=8mm},\n    arrow/.style={-{Latex[length=3mm]}},\n    dashed arrow/.style={-{Latex[length=3mm]}, dashed}\n]\n\n% Define nodes\n\\node[block] (add_norm) {Add \\& Norm};\n\\node[block, below=of add_norm] (add) {Add};\n\\node[block, below=of add] (norm) {Norm};\n\\node[block, below=of norm] (add2) {Add};\n\\node[block, below=of add2, fill=blue!20] (ff_up) {Feed Forward Up};\n\\node[block, below=of ff_up, fill=blue!20] (ff_down) {Feed Forward Down};\n\\node[block, below=of ff_down] (norm2) {Norm};\n\\node[block, below=of norm2] (adapter) {Adapter};\n\\node[block, below=of adapter] (add_norm2) {Add \\& Norm};\n\\node[block, below=of add_norm2] (ff) {Feed Forward};\n\\node[block, below=of ff] (add_norm3) {Add \\& Norm};\n\\node[block, below=of add_norm3] (attn) {Multi-Head Attention};\n\n% Draw arrows\n\\draw[arrow] (add_norm) -- (add);\n\\draw[arrow] (add) -- (norm);\n\\draw[arrow] (norm) -- (add2);\n\\draw[arrow] (add2) -- (ff_up);\n\\draw[arrow] (ff_up) -- (ff_down);\n\\draw[arrow] (ff_down) -- (norm2);\n\\draw[arrow] (norm2) -- (adapter);\n\\draw[dashed arrow] (adapter) -- ++(0,-10mm) -| (add_norm2);\n\\draw[arrow] (add_norm2) -- (ff);\n\\draw[arrow] (ff) -- (add_norm3);\n\\draw[arrow] (add_norm3) -- (attn);\n\n% Draw dashed box around the adapter section\n\\draw[dashed, thick] ([shift={(0,1)}]ff_down.north west) rectangle ([shift={(0,-1)}]adapter.south east);\n\n% Draw the outer rectangle\n\\draw[thick, rounded corners] ([shift={(-1,-1)}]add_norm.west) rectangle ([shift={(1,1)}]attn.east);\n\n\\end{tikzpicture}\n\nFor the individual adapter predictions, we use a Transformer-based model with adapter layers inserted after the feed-forward layer of the Transformer as proposed by \\citet{pfeiffer-etal-2021-adapterfusion}.\n\n\\end{document}",
  "ground_truth": "\\documentclass[10pt, a4paper]{article}\n\\usepackage{amsmath}\n\\usepackage{tikz}\n\\usetikzlibrary{shadows}\n\\usetikzlibrary{arrows}\n\\usepackage{colortbl}\n\n\\begin{document}\n\n\\begin{tikzpicture}[block/.style={rectangle, draw, line width=0.3mm, rounded corners, font=\\ttfamily\\scriptsize}]\n    \\node[block, minimum width=4.0cm, minimum height=9.3cm, line width=0.6mm, rounded corners=5mm, fill=cyan!10, drop shadow] (main) at (0,-0.6) {};\n    \\node[block, dashed, minimum width=2.7cm, minimum height=4.2cm, line width=0.2mm, fill=red!10] (main) at (0,1.0) {};\n\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=yellow!10] (add3) at (0, 3.6) {Add \\& Norm};\n\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (addadap2) at (0,2.7) {Add};\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (normadap2) at (0,2.2) {Norm};\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (addadap1) at (0,1.7) {Add};\n\n    \\node[block, minimum width=2cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=blue!10] (ff3) at (0,1.0) {Feed \\\\ Forward Up};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=blue!10] (ff2) at (0,0.2) {Feed \\\\ Forward Down};\n    \\node[block, draw, minimum width=0.5cm, minimum height=0.2cm, line width=0.3mm, align=center, fill=yellow!10] (normadap1) at (0,-0.5) {Norm};\n\n\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=yellow!10] (add2) at (0,-1.6) {Add \\& Norm};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=blue!10] (ff1) at (0,-2.5) {Feed \\\\ Forward};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=yellow!10] (add1) at (0,-3.4) {Add \\& Norm};\n    \\node[block, minimum width=1cm, minimum height=0.5cm, line width=0.3mm, align=center, fill=brown!10] (att1) at (0,-4.2) {Multi-Head \\\\ Attention};\n\n    \\draw[->, line width=0.3mm] (-1.1,-2.0) |- (addadap2);\n    \\draw[->, line width=0.3mm] (-1.1,-2.0) |- (addadap1);\n\n    \\draw[line width=0.3mm] (0,-2.0) |- (-1.1,-2.0);\n    \\draw[line width=0.3mm] (0,-1.25) |- (-1.1,-1.25);\n\n\n    \\draw[->, line width=0.3mm] (-1.5,-3.0) |- (add3);\n\n    \\draw[->, line width=0.3mm] (-1.5,-3.0) |- (add2);\n    \\draw[line width=0.3mm] (0,-3.0) |- (-1.5,-3.0);\n\n    \\draw[->, line width=0.3mm] (-1.5,-5.0) |- (add1);\n    \\draw[line width=0.3mm] (0,-5.0) |- (-1.5,-5.0);\n\n    \\draw[->, line width=0.3mm] (-0.5,-4.8) -| (0.5, -4.55);\n    \\draw[->, line width=0.3mm] (-0.5,-4.8) -| (-0.5, -4.55);\n    \\draw[->, line width=0.3mm] (0,-5.5) -- (-0,-4.55);\n\n\n    \\path[every node/.style={font=\\sffamily\\small}]\n        (att1) edge[line width=0.3mm] node [right] {} (add1)\n        (add1) edge[line width=0.3mm] node [right] {} (ff1)\n        (ff1) edge[line width=0.3mm] node [right] {} (add2)\n        (add2) edge[line width=0.3mm] node [right] {} (normadap1)\n        (normadap1) edge[line width=0.3mm] node [right] {} (ff2)\n        (ff2) edge[line width=0.3mm] node [right] {} (ff3)\n        (ff3) edge[line width=0.3mm] node [right] {} (addadap1)\n        (addadap1) edge[line width=0.3mm] node [right] {} (normadap2)\n        (normadap2) edge[line width=0.3mm] node [right] {} (addadap2)\n        (addadap2) edge[line width=0.3mm] node [right] {} (add3);\n\n\n    \\node[font=\\scriptsize\\ttfamily\\bfseries, text centered, text width=1cm] at (0.7,-0.9) {Adapter};\n\n\n\\end{tikzpicture}\n\n\\end{document}"
}