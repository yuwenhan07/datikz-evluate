\documentclass{article}
\usepackage{tikz}
\usetikzlibrary{matrix}

\begin{document}

\begin{figure}[h]
    \centering
    \begin{tikzpicture}
        \matrix (m) [matrix of nodes,nodes={minimum width=3cm, minimum height=2cm, anchor=center, draw}, column sep=-\pgflinewidth, row sep=-\pgflinewidth] {
            & & & & & & & \\
            & & & & & & & \\
            & & & & & & & \\
            |[fill=gray!50]| & & |[fill=gray!50]| K_i^2 & & |[fill=gray!50]| & & |[fill=gray!50]| & \\
            |[fill=gray!50]| & & & & & & & \\
            & & & & & & & \\
            & & & & & & & \\
            & & & & & & & \\
        };
        \draw[dotted] (-2.5,-2.5) rectangle (8.5,2.5);
        \draw[gray] (m-1-1.center) -- (m-1-8.center) (m-8-1.center) -- (m-8-8.center) (m-1-8.center) -- (m-8-8.center) (m-7-1.center) -- (m-7-8.center) (m-1-1.center) -- (m-8-1.center) (m-1-8.center) -- (m-8-8.center);
        \node at (m-4-4) {$\mathtt{k}_{p,q+1}$};
        \node at (m-6-3) {$\mathtt{k}_{p,q}$};
        \node at (m-6-5) {$\mathtt{k}_{p+1,q}$};
        \node at (m-3-5) {$\mathtt{k}_{p,q-1}$};
        \node at (m-1-3) {$\mathtt{k}_{p-1,q}$};
        \draw[gray] (m-6-3) -- (m-6-5) -- (m-4-5) -- (m-4-3) -- cycle;
        \node at (m-6-4) {$e_3$};
        \node at (m-6-3) {$e_4$};
        \node at (m-4-3) {$e_2$};
        \node at (m-4-4) {$e_1$};
        \draw[gray] (m-5-3) -- (m-5-5) -- (m-7-5) -- (m-7-3) -- cycle;
        \node at (m-5-4) {$\mathtt{v}_{p,q}$};
        \node at (m-5-5) {$\mathtt{v}_{p+1,q}$};
        \node at (m-5-3) {$\mathtt{v}_{p,q-1}$};
        \node at (m-7-4) {$\mathtt{k}_i$};
    \end{tikzpicture}
\caption{Illustration for a construction of $\tilde{\kappa}$, where $\mathtt{k}_{p,q}$, $\mathtt{k}_{p-1,q}$, $\mathtt{k}_{p+1,q}$, $\mathtt{k}_{p,q-1}$ and $\mathtt{k}_{p,q+1}$ are values of $\kappa$ on the located fine elements respectively, the fine element in the top-left corner of $K_i$ is highlighted with four edges $e_1\sim e_4$ surrounded, $\mathtt{v}_{p,q}$, $\mathtt{v}_{p+1,q}$ and $\mathtt{v}_{p,q-1}$ are values of $v\in W_h(K_i)$ on the located fine elements respectively.}
\label{fig:construction_tilde_kappa}
\end{figure}

\end{document}