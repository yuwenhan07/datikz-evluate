{
  "prompt": "A visual representation of the training scheme for LoRA. The update of $W$ is given by $W_0 + BA$ where $B$ and $A$ are of a particular low-rank form.",
  "final_latex_code": "\\documentclass{article}\n\\usepackage{tikz}\n\\usetikzlibrary{shapes.geometric, arrows.meta}\n\n\\begin{document}\n\n% Define colors\n\\definecolor{lightblue}{RGB}{191,220,238}\n\\definecolor{lightorange}{RGB}{255,228,194}\n\n% Set up TikZ picture environment\n\\begin{tikzpicture}[node distance=1cm, auto]\n    % Define node styles\n    \\tikzset{\n        block/.style = {rectangle, draw, fill=lightblue!60, \n            text width=7em, text centered, rounded corners, minimum height=4em},\n        input/.style = {coordinate},\n        output/.style = {coordinate},\n        sum/.style = {draw, circle, node distance=1cm},\n        vec/.style = {trapezoid, trapezoid stretches=true, trapezoid left angle=70, trapezoid right angle=-70,\n            draw, fill=lightorange!60, minimum height=3em},\n        vector/.style = {coordinate},\n        annot/.style = {text width=4em, text centered}\n    }\n\n    % Draw nodes\n    \\node [block] (W) {\\begin{tabular}{c} Pretrained \\\\ Weights \\\\ $W_0 \\in \\mathbb{R}^{d \\times k}$ \\end{tabular}};\n    \\node [vector, right = 1cm of W] (vecA) {};\n    \\node [vector, above right = 1cm and 1cm of vecA] (vecBA) {};\n    \\node [vector, below right = 1cm and 1cm of vecA] (vecBB) {};\n    \\node [sum, above right = 1cm of vecBA] (sum) {$+$};\n    \\node [input, below right = 1cm and 1cm of vecBB] (WvecB) {};\n    \\node [annot, left = 1cm of W, anchor=south] (inputW) {$W \\rightarrow$};\n    \\node [annot, right = 1cm of WvecB, anchor=south] (outputWvecB) {$d$};\n    \\node [annot, above = 1cm of sum, anchor=south] (outputWvecB) {$k$};\n    \\node [annot, above = 1cm of vecBA, anchor=south] (outputWvecB) {$r$};\n    \\node [annot, above = 1cm of vecBB, anchor=south] (outputWvecB) {$d$};\n\n    % Draw arrows\n    \\draw [->] (W) -- (vecA);\n    \\draw [->] (vecA) -- (vecBA);\n    \\draw [->] (vecBA) -- (sum);\n    \\draw [->] (sum) -- (vecBB);\n    \\draw [->] (vecBB) -- (WvecB);\n\n    % Additional key\n    \\node [block, fill=white] at (8, 0) (key) {Key};\n    \\node [annot, below of=key, anchor=center] (trainable) {Trainable};\n    \\node [annot, below of=trainable, anchor=center] (frozen) {Frozen};\n\n    % Add labels for trainable and frozen\n    \\draw [->] (trainable) -- ++(0.5,0) -- ++(0.5,0.5) -- ++(-0.5,0.5) -- (key.center);\n    \\draw [->] (frozen) -- ++(-0.5,0) -- ++(-0.5,-0.5) -- ++(0.5,-0.5) -- (key.center);\n\n    % Annotations for matrices\n    \\node at (vecA|-outputWvecB) {\\small$d$};\n    \\node at (vecBA|-outputWvecB) {\\small$k$};\n    \\node at (vecBB|-outputWvecB) {\\small$d$};\n    \\node at (vecBA|-outputWvecB) {\\small$r$};\n    \\node at (sum|-outputWvecB) {\\small$k$};\n\n\\end{tikzpicture}\n\n\\end{document}",
  "compiled_successfully": true,
  "ground_truth": "\\documentclass{article}\n\\usepackage{amssymb}\n\\usepackage{tikz}\n\n\\begin{document}\n\n\\begin{tikzpicture}[]\n\\node[fill=blue!10 ,minimum height = 12em, draw=black] at (0,0) {\\begin{tabular}{c}Pretrained\\\\ Weights\\\\ \\\\ $W_0 \\in \\mathbb{R}^{d\\times k}$ \\end{tabular}};\n\n\\draw[fill=orange!10 ,minimum height = 10em] (2,-2) -- (5,-2) -- (4,-.5) -- (3,-.5) -- (2,-2);\n\\draw[fill=orange!10 ,minimum height = 10em] (2,2) -- (5,2) -- (4,.5) -- (3,.5) -- (2,2);\n\\node at (3.5,-1.5) {$B\\in \\mathbb{R}^{d\\times r}$};\n\\node at (3.5,1.5) {$A\\in \\mathbb{R}^{r\\times k}$};\n\\node at (3.5,0) {$\\otimes$};\n\\node at (3.5,.3) {$r$};\n\\node at (3.5,-.3) {$r$};\n\\node at (3.5,-2.3) {$d$};\n\\node at (0,-2.3) {$d$};\n\\node at (0,2.3) {$k$};\n\\node at (3.5,2.3) {$k$};\n\\draw (2,3) circle (2mm);\n\\draw (2,3-.2) -- (2,3+.2);\n\\draw[rounded corners=2pt, thick] (0,2.5) |- (2,3);\n\\draw[rounded corners=2pt, thick] (3.5,2.5) |- (2,3);\n\\node[fill=orange!10, draw=black, thick, minimum width=5em] at (8,0.5) {Trainable};\n\\node[fill=blue!10, draw=black, thick, minimum width=5em] at (8,-0.5) {Frozen};\n\\node at (8,1) {Key};\n\\node at (-2,0) {$W \\to $};\n\\end{tikzpicture}\n\n\\end{document}",
  "attempts": 1
}